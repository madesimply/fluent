<!DOCTYPE html>
  <html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
  </head>
  <body>
    <script src="./fluent.js"></script>
    <script>
      // Define NavComponent
      class NavComponent extends HTMLElement {
        constructor() {
          super();
          this.attachShadow({ mode: 'open' });
          const nav = document.createElement('nav');
          nav.textContent = 'Navigation Bar';
          this.shadowRoot.append(nav);
        }

        setTitle(title) {
          this.shadowRoot.querySelector('nav').textContent = title;
          return this; // Allow chaining
        }

        addItem(item) {
          this.shadowRoot.querySelector('nav').appendChild(item);
          return this; // Allow chaining
        }
      }

      customElements.define('nav-component', NavComponent);

      // Define LinkComponent
      class LinkComponent extends HTMLElement {
        constructor() {
          super();
          this.attachShadow({ mode: 'open' });
          const link = document.createElement('a');
          link.textContent = 'Link';
          this.shadowRoot.append(link);
        }

        setHref(href) {
          this.shadowRoot.querySelector('a').setAttribute('href', href);
          return this; // Allow chaining
        }

        setText(text) {
          this.shadowRoot.querySelector('a').textContent = text;
          return this; // Allow chaining
        }
      }

      customElements.define('link-component', LinkComponent);

      const components = {
        nav: {
          component: () => new NavComponent(),
          setTitle: ({ctx}, title) => {
            ctx.setTitle(title)
            return ctx;
          },
          addItem: ({ctx}, item) => {
            ctx.addItem(item)
            return ctx;
          },
          link: {
            component: () => new LinkComponent(),
            setHref: ({ctx}, href) => {
              ctx.setHref(href)
              return ctx;
            },
            setText: ({ctx}, text) => {
              ctx.setText(text)
              return ctx;
            },
          }
        }
      };

      const { nav } = fluent(components);

      // Using the fluent API 
      document.body.appendChild(
        nav
          .component
            .setTitle('Main Navigation')
            .addItem(
              nav.link.component.setHref('#home').setText('Home').run()
            )
            .addItem(
              nav.link.component.setHref('#about').setText('About').run()
            )
            .addItem(
              nav.link.component.setHref('#contact').setText('Contact').run()
            ).run()
      );
    </script>
  </body>
</html>